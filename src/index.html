<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WeiluTV</title>
    <link type="text/css" rel="stylesheet" href="/resources/app/static/css/materialize.min.css"
          media="screen,projection"/>
</head>
<body>
<div id="app">
    <!--<NavBar class="top-nav" :active="active"></NavBar>-->
    <router-view name="Navbar" :active="active"></router-view>
    <div class="" style="width:100%">
        <router-view></router-view>
    </div>
</div>
<script src="/resources/app/static/js/socket.io-1.4.5.min.js"></script>
<script src="/resources/app/static/js/vue/vue.min.js"></script>
<script src="/resources/app/static/js/vue/vue-resource.min.js"></script>
<script src="/resources/app/static/js/vue/vue-router.min.js"></script>
<script type="text/javascript">
    var fs = require('fs');
    var ServerConf = {};
    fs.readFile('resources/app/package.json', function (err, data) {
        if (err) throw err;
        var packageJson = JSON.parse(data);
        ServerConf.host = packageJson['conf'].host;
        ServerConf.isDev = process.defaultApp || /[\\/]projects[\\/]/.test(process.execPath);
        var script = document.createElement('script');
        console.log('isDev', ServerConf.isDev);
        var t = new Date().getTime();
        if (ServerConf.isDev)
            script.src = "file:///resources/app/static/monitor/index.js";
        else
            script.src = "http://" + ServerConf.host + '/monitor/index.js?t=' + t;
        document.body.appendChild(script);
    })
</script>
</body>
</html>